{"version":3,"sources":["webpack:///D:/laragon/www/wl_project/feike_uni_app/pages/todoChild/promoteGoods/components/ShareCanvas/ShareCanvas.vue?a09f","webpack:///D:/laragon/www/wl_project/feike_uni_app/pages/todoChild/promoteGoods/components/ShareCanvas/ShareCanvas.vue?138c","webpack:///D:/laragon/www/wl_project/feike_uni_app/pages/todoChild/promoteGoods/components/ShareCanvas/ShareCanvas.vue?a461","webpack:///D:/laragon/www/wl_project/feike_uni_app/pages/todoChild/promoteGoods/components/ShareCanvas/ShareCanvas.vue?e8a2","webpack:///D:/laragon/www/wl_project/feike_uni_app/pages/todoChild/promoteGoods/components/ShareCanvas/ShareCanvas.vue","webpack:///D:/laragon/www/wl_project/feike_uni_app/pages/todoChild/promoteGoods/components/ShareCanvas/ShareCanvas.vue?a1e8"],"names":["__webpack_require__","r","__webpack_exports__","_ShareCanvas_vue_vue_type_template_id_e7a7a554_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_ShareCanvas_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","Object","options","__file","_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_ShareCanvas_vue_vue_type_template_id_e7a7a554_scoped_true___WEBPACK_IMPORTED_MODULE_0__","render","staticRenderFns","_h","this","$createElement","_self","_c","_withStripped","_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_ShareCanvas_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_ShareCanvas_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","n","_ShareCanvasUtil","_interopRequireWildcard","_image","_wx","data","canvas","canvasComponent","hideShareCanvas","shareCanvas","hideBtnSet","hideBox","downloadImg","DOWNLOAD_IMG","qRCodeUrl","props","width","type","Number","required","height","config","defautl","mounted","wx","createCanvasContext","methods","checkPermission","_this","then","result","code","renum","UNAUTHORIZED","showJump","NOPERMISSION","HASPERMISSION","showShareCanvas","console","warn","junpAuthorization","IWX","invoke","showBox","hideCanvas","event","INITIATIVE","currentTarget","dataset","mark","switchAuthorization","saveForAlubm","_this2","getTempImgPath","value","saveImgLocal","catch","drawShareCanvas","_this3","draw","res","uni","hideLoading","share","_share","_regenerator","default","_callee","wrap","_context","prev","next","t0","miniCodeUrl","genderMiniCode","sent","showLoading","title","ShareCanvas","ctx","imgUrl","price","qRCodeWidth","isDraw","stop","apply","arguments","_this4","Promise","resolve","reject","canvasToTempFilePath","x","y","canvasId","success","tempFilePath","fail","err","error","_this5","getUnlimited","page","jumpPath","scene","is_hyaline","_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_1_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_8_oneOf_1_2_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_4_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_ShareCanvas_vue_vue_type_style_index_0_id_e7a7a554_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_1_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_8_oneOf_1_2_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_loaders_stylePostLoader_js_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_4_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_vue_loader_lib_index_js_vue_loader_options_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_custom_block_loader_index_js_ref_0_1_HbuilderX_HBuilderX_2_4_2_20191115_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_ShareCanvas_vue_vue_type_style_index_0_id_e7a7a554_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"pages/todoChild/promoteGoods/components/ShareCanvas/ShareCanvas.js","sourcesContent":["import { render, staticRenderFns } from \"./ShareCanvas.vue?vue&type=template&id=e7a7a554&scoped=true&\"\nimport script from \"./ShareCanvas.vue?vue&type=script&lang=js&\"\nexport * from \"./ShareCanvas.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ShareCanvas.vue?vue&type=style&index=0&id=e7a7a554&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e7a7a554\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HbuilderX\\\\HBuilderX.2.4.2.20191115\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('e7a7a554', component.options)\n    } else {\n      api.reload('e7a7a554', component.options)\n    }\n    module.hot.accept(\"./ShareCanvas.vue?vue&type=template&id=e7a7a554&scoped=true&\", function () {\n      api.rerender('e7a7a554', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"laragon/www/wl_project/feike_uni_app/pages/todoChild/promoteGoods/components/ShareCanvas/ShareCanvas.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ShareCanvas.vue?vue&type=template&id=e7a7a554&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ShareCanvas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ShareCanvas.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\n'use scrict';\r\nimport ShareCanvas, { IWX, result, renum } from './ShareCanvasUtil.js';\r\nimport { DOWNLOAD_IMG } from '@/config/image.js';\r\nimport { getUnlimited } from '@/api/wx.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// 画布对象\r\n\t\t\tcanvas: null,\r\n\r\n\t\t\t// 画布组件\r\n\t\t\tcanvasComponent: null,\r\n\r\n\t\t\t// 显示推广图\r\n\t\t\thideShareCanvas: true,\r\n\r\n\t\t\t// 分享画布对象\r\n\t\t\tshareCanvas: null,\r\n\r\n\t\t\t// 隐藏推广图按钮列表\r\n\t\t\thideBtnSet: false,\r\n\r\n\t\t\t// 隐藏弹幕\r\n\t\t\thideBox: true,\r\n\r\n\t\t\t// 下载图片icon\r\n\t\t\tdownloadImg: DOWNLOAD_IMG,\r\n\r\n\t\t\t// 小程序码\r\n\t\t\tqRCodeUrl: ''\r\n\t\t};\r\n\t},\r\n\r\n\tprops: {\r\n\t\twidth: {\r\n\t\t\ttype: Number,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\theight: {\r\n\t\t\ttype: Number,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tconfig: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefautl() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tmounted() {\r\n\t\tthis.canvasComponent = wx.createCanvasContext('canvas', this);\r\n\t},\r\n\r\n\t/**\r\n\t * 组件的方法列表\r\n\t */\r\n\tmethods: {\r\n\t\t/**\r\n\t\t * 检查是否有保存图片到本地权限\r\n\t\t * 有则显示保存到相册按钮\r\n\t\t * 否则显示跳转授权按钮\r\n\t\t */\r\n\t\tcheckPermission() {\r\n\t\t\tthis.canvas &&\r\n\t\t\t\tthis.canvas.checkPermission().then(result => {\r\n\t\t\t\t\tif (result.code == renum.UNAUTHORIZED) {\r\n\t\t\t\t\t\tthis.showJump();\r\n\t\t\t\t\t} else if (result.code == renum.NOPERMISSION || result.code == renum.HASPERMISSION) {\r\n\t\t\t\t\t\tthis.showShareCanvas();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.warn('检测权限返回结果错误');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 跳转授权\r\n\t\t */\r\n\t\tjunpAuthorization() {\r\n\t\t\tIWX.invoke('openSetting');\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 显示弹幕\r\n\t\t */\r\n\t\tshowBox() {\r\n\t\t\tthis.hideBox = false;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 显示推广图\r\n\t\t * 显示保存图片按钮\r\n\t\t */\r\n\t\tshowShareCanvas() {\r\n\t\t\t(this.hideBox = false), (this.hideShareCanvas = false), (this.hideBtnSet = false);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 显示推广图\r\n\t\t * 隐藏保存图片按钮\r\n\t\t * 显示跳转设置权限页面\r\n\t\t */\r\n\t\tshowJump() {\r\n\t\t\t(this.hideBox = false), (this.hideShareCanvas = false), (this.hideBtnSet = true);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 隐藏推广图\r\n\t\t */\r\n\t\thideCanvas(event) {\r\n\t\t\tif (event == renum.INITIATIVE || event.currentTarget.dataset.mark == 'box') {\r\n\t\t\t\t(this.hideBox = true), (this.hideShareCanvas = true);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 隐藏推广图\r\n\t\t * 显示跳转授权页面按钮\r\n\t\t */\r\n\t\tswitchAuthorization() {\r\n\t\t\tthis.hideCanvas(renum.INITIATIVE);\r\n\t\t\tthis.hideBtnSet = true;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 保存推广图到相册\r\n\t\t */\r\n\t\tsaveForAlubm() {\r\n\t\t\tthis.getTempImgPath().then(value => {\r\n\t\t\t\tthis.canvas\r\n\t\t\t\t\t.saveImgLocal(value)\r\n\t\t\t\t\t.then(result => {\r\n\t\t\t\t\t\tthis.hideCanvas(renum.INITIATIVE);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(result => {\r\n\t\t\t\t\t\tthis.switchAuthorization();\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 绘制推广图\r\n\t\t */\r\n\t\tdrawShareCanvas() {\r\n\t\t\tthis.canvas\r\n\t\t\t\t.draw()\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tthis.showShareCanvas();\r\n\t\t\t\t})\r\n\t\t\t\t.catch(result => {\r\n\t\t\t\t\tif (result.code == renum.UNAUTHORIZED) {\r\n\t\t\t\t\t\tthis.showJump();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 点击分享\r\n\t\t */\r\n\t\tshare: async function() {\r\n\t\t\t!this.miniCodeUrl && (this.miniCodeUrl = await this.genderMiniCode());\r\n\t\t\tif (this.canvas === null) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '正在加载'\r\n\t\t\t\t});\r\n\t\t\t\tthis.canvas = new ShareCanvas({ // 创建推广图对象\r\n\t\t\t\t\tctx: this.canvasComponent,\r\n\t\t\t\t\timgUrl: this.config.imgUrl,\r\n\t\t\t\t\tqRCodeUrl: this.qRCodeUrl,\r\n\t\t\t\t\ttitle: this.config.title,\r\n\t\t\t\t\tprice: this.config.price,\r\n\t\t\t\t\twidth: this.width,\r\n\t\t\t\t\theight: this.height,\r\n\t\t\t\t\tqRCodeWidth: 280\r\n\t\t\t\t});\r\n\t\t\t\tthis.checkPermission();\r\n\t\t\t\tthis.showBox(); // 先把弹幕弹出来，不给用户划走的绘制的推广图\r\n\t\t\t\tthis.drawShareCanvas();\r\n\t\t\t} else {\r\n\t\t\t\tthis.showBox(); // 先把弹幕弹出来，不给用户划走的绘制的推广图\r\n\t\t\t\tif (!this.canvas.isDraw)\r\n\t\t\t\t\t// 如果该画布还没有绘制，就先绘制\r\n\t\t\t\t\tthis.drawShareCanvas();\r\n\t\t\t\tthis.checkPermission();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 获取推广图临时路径\r\n\t\t */\r\n\t\tgetTempImgPath() {\r\n\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\tuni.canvasToTempFilePath(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tx: 0,\r\n\t\t\t\t\t\ty: 0,\r\n\t\t\t\t\t\tcanvasId: 'canvas',\r\n\t\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t\tresolve(res.tempFilePath);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail(err) {\r\n\t\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tthis\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 获取小程序码\r\n\t\t */\r\n\t\tgenderMiniCode: function() {\r\n\t\t\treturn getUnlimited({\r\n\t\t\t\tpage: this.config.jumpPath,\r\n\t\t\t\tscene: this.config.scene,\r\n\t\t\t\twidth: 600,\r\n\t\t\t\tis_hyaline: true\r\n\t\t\t}).then(res => {\r\n\t\t\t\tthis.qRCodeUrl = res;\r\n\t\t\t}).catch(res => {\r\n\t\t\t\tthis.hideCanvas(renum.INITIATIVE);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n","import mod from \"-!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ShareCanvas.vue?vue&type=style&index=0&id=e7a7a554&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../../../../HbuilderX/HBuilderX.2.4.2.20191115/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./ShareCanvas.vue?vue&type=style&index=0&id=e7a7a554&lang=scss&scoped=true&\""],"sourceRoot":""}