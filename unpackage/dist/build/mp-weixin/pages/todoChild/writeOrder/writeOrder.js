(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/todoChild/writeOrder/writeOrder"],{"29aa":function(t,e,n){"use strict";(function(t){n("66d2"),n("921b");r(n("66fd"));var e=r(n("8174"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},8174:function(t,e,n){"use strict";n.r(e);var r=n("f9e4"),i=n("c28b");for(var u in i)"default"!==u&&function(t){n.d(e,t,function(){return i[t]})}(u);n("e1c4");var a=n("2877"),s=Object(a["a"])(i["default"],r["a"],r["b"],!1,null,null,null);e["default"]=s.exports},8478:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n("a34a")),i=n("0ae1"),u=n("36ce"),a=n("4d7d"),s=n("3956");function o(t){return t&&t.__esModule?t:{default:t}}function c(t,e,n,r,i,u,a){try{var s=t[u](a),o=s.value}catch(c){return void n(c)}s.done?e(o):Promise.resolve(o).then(r,i)}function d(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var u=t.apply(e,n);function a(t){c(u,r,i,a,s,"next",t)}function s(t){c(u,r,i,a,s,"throw",t)}a(void 0)})}}var f=function(){return n.e("components/OrderInfor").then(n.bind(null,"c074"))},l=function(){return n.e("components/YldAddress").then(n.bind(null,"b8f9"))},h={data:function(){return{orderInformation:{},shippingAddress:{infor:{},listQuery:{page:1,size:5}},allMoney:0,submiting:!1}},onLoad:function(){var t=this;this.orderInformation=getApp().globalData.goodsInfor,this.allMoney=this.orderInformation.goodsPrice,(0,a.loadAddress)(this.shippingAddress.listQuery).then(function(e){t.shippingAddress.infor=e.list[0]}),this.$eventBus.$on("addressChange",function(e){t.shippingAddress.infor=e})},components:{OrderInfor:f,YldAddress:l},methods:{changeAllMoney:function(t){this.allMoney=Number(t)*Number(this.orderInformation.goodsPrice)},checkAddress:function(){var t=d(r.default.mark(function t(){var e,n;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.shippingAddress.infor,n=!0,e.addres&&e.name&&e.phone){t.next=6;break}return this.isSuccess=!1,t.next=6,(0,u.model)({content:"请添加收货地址"});case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),createOrder:function(){var t=d(r.default.mark(function t(){var e;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,s.createOrder)({addressId:this.shippingAddress.infor.id,gid:this.orderInformation.id});case 2:if(e=t.sent,t.t0=1!==Number(e.count),!t.t0){t.next=8;break}return e=null,t.next=8,(0,u.model)({content:"创建订单失败,请重新选择商品",showCancel:!1});case 8:return t.abrupt("return",e);case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),payOrder:function(){var t=d(r.default.mark(function t(e){var n;return r.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,s.payOrder)({uuid:e,money:this.allMoney});case 2:if(n=t.sent,t.t0=1!==Number(n.count),!t.t0){t.next=8;break}return n=null,t.next=8,(0,u.model)({content:"支付失败,请重新选择商品",showCancel:!1});case 8:return t.abrupt("return",n);case 9:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),startTodo:function(){var e=d(r.default.mark(function e(){var n;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.submiting){e.next=2;break}return e.abrupt("return");case 2:return this.submiting=!0,e.next=5,this.checkAddress();case 5:if(e.t1=e.sent,!e.t1){e.next=10;break}return e.next=9,this.createOrder();case 9:e.t1=n=e.sent;case 10:if(e.t0=e.t1,!e.t0){e.next=15;break}return e.next=14,this.payOrder(n.uuid);case 14:e.t0=e.sent;case 15:if(e.t0){e.next=17;break}return e.abrupt("return",this.submiting=!1);case 17:t.navigateTo({url:"".concat(i.ORDER_DETAIL,"?id=").concat(n.uuid)}),this.submiting=!1;case 19:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}()}};e.default=h}).call(this,n("543d")["default"])},c28b:function(t,e,n){"use strict";n.r(e);var r=n("8478"),i=n.n(r);for(var u in r)"default"!==u&&function(t){n.d(e,t,function(){return r[t]})}(u);e["default"]=i.a},d469:function(t,e,n){},e1c4:function(t,e,n){"use strict";var r=n("d469"),i=n.n(r);i.a},f9e4:function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement;t._self._c},i=[];n.d(e,"a",function(){return r}),n.d(e,"b",function(){return i})}},[["29aa","common/runtime","common/vendor"]]]);