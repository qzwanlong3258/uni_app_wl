(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-todoChild-camera-index"],{"02f9":function(t,e,n){"use strict";var i=n("4ea4"),o=i(n("d225")),r=i(n("b0b4"));n("28a5"),n("456d"),n("55dd"),n("ac6a");var a={KEY_ERR:311,KEY_ERR_MSG:"key格式错误",PARAM_ERR:310,PARAM_ERR_MSG:"请求参数信息有误",SYSTEM_ERR:600,SYSTEM_ERR_MSG:"系统错误",WX_ERR_CODE:1e3,WX_OK_CODE:200},s="https://apis.map.qq.com/ws/",u=s+"place/v1/search",c=s+"place/v1/suggestion",l=s+"geocoder/v1/",d=s+"district/v1/list",f=s+"district/v1/getchildren",g=s+"distance/v1/",h=s+"direction/v1/",p={driving:"driving",transit:"transit"},m=6378136.49,v={safeAdd:function(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n},bitRotateLeft:function(t,e){return t<<e|t>>>32-e},md5cmn:function(t,e,n,i,o,r){return this.safeAdd(this.bitRotateLeft(this.safeAdd(this.safeAdd(e,t),this.safeAdd(i,r)),o),n)},md5ff:function(t,e,n,i,o,r,a){return this.md5cmn(e&n|~e&i,t,e,o,r,a)},md5gg:function(t,e,n,i,o,r,a){return this.md5cmn(e&i|n&~i,t,e,o,r,a)},md5hh:function(t,e,n,i,o,r,a){return this.md5cmn(e^n^i,t,e,o,r,a)},md5ii:function(t,e,n,i,o,r,a){return this.md5cmn(n^(e|~i),t,e,o,r,a)},binlMD5:function(t,e){var n,i,o,r,a;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var s=1732584193,u=-271733879,c=-1732584194,l=271733878;for(n=0;n<t.length;n+=16)i=s,o=u,r=c,a=l,s=this.md5ff(s,u,c,l,t[n],7,-680876936),l=this.md5ff(l,s,u,c,t[n+1],12,-389564586),c=this.md5ff(c,l,s,u,t[n+2],17,606105819),u=this.md5ff(u,c,l,s,t[n+3],22,-1044525330),s=this.md5ff(s,u,c,l,t[n+4],7,-176418897),l=this.md5ff(l,s,u,c,t[n+5],12,1200080426),c=this.md5ff(c,l,s,u,t[n+6],17,-1473231341),u=this.md5ff(u,c,l,s,t[n+7],22,-45705983),s=this.md5ff(s,u,c,l,t[n+8],7,1770035416),l=this.md5ff(l,s,u,c,t[n+9],12,-1958414417),c=this.md5ff(c,l,s,u,t[n+10],17,-42063),u=this.md5ff(u,c,l,s,t[n+11],22,-1990404162),s=this.md5ff(s,u,c,l,t[n+12],7,1804603682),l=this.md5ff(l,s,u,c,t[n+13],12,-40341101),c=this.md5ff(c,l,s,u,t[n+14],17,-1502002290),u=this.md5ff(u,c,l,s,t[n+15],22,1236535329),s=this.md5gg(s,u,c,l,t[n+1],5,-165796510),l=this.md5gg(l,s,u,c,t[n+6],9,-1069501632),c=this.md5gg(c,l,s,u,t[n+11],14,643717713),u=this.md5gg(u,c,l,s,t[n],20,-373897302),s=this.md5gg(s,u,c,l,t[n+5],5,-701558691),l=this.md5gg(l,s,u,c,t[n+10],9,38016083),c=this.md5gg(c,l,s,u,t[n+15],14,-660478335),u=this.md5gg(u,c,l,s,t[n+4],20,-405537848),s=this.md5gg(s,u,c,l,t[n+9],5,568446438),l=this.md5gg(l,s,u,c,t[n+14],9,-1019803690),c=this.md5gg(c,l,s,u,t[n+3],14,-187363961),u=this.md5gg(u,c,l,s,t[n+8],20,1163531501),s=this.md5gg(s,u,c,l,t[n+13],5,-1444681467),l=this.md5gg(l,s,u,c,t[n+2],9,-51403784),c=this.md5gg(c,l,s,u,t[n+7],14,1735328473),u=this.md5gg(u,c,l,s,t[n+12],20,-1926607734),s=this.md5hh(s,u,c,l,t[n+5],4,-378558),l=this.md5hh(l,s,u,c,t[n+8],11,-2022574463),c=this.md5hh(c,l,s,u,t[n+11],16,1839030562),u=this.md5hh(u,c,l,s,t[n+14],23,-35309556),s=this.md5hh(s,u,c,l,t[n+1],4,-1530992060),l=this.md5hh(l,s,u,c,t[n+4],11,1272893353),c=this.md5hh(c,l,s,u,t[n+7],16,-155497632),u=this.md5hh(u,c,l,s,t[n+10],23,-1094730640),s=this.md5hh(s,u,c,l,t[n+13],4,681279174),l=this.md5hh(l,s,u,c,t[n],11,-358537222),c=this.md5hh(c,l,s,u,t[n+3],16,-722521979),u=this.md5hh(u,c,l,s,t[n+6],23,76029189),s=this.md5hh(s,u,c,l,t[n+9],4,-640364487),l=this.md5hh(l,s,u,c,t[n+12],11,-421815835),c=this.md5hh(c,l,s,u,t[n+15],16,530742520),u=this.md5hh(u,c,l,s,t[n+2],23,-995338651),s=this.md5ii(s,u,c,l,t[n],6,-198630844),l=this.md5ii(l,s,u,c,t[n+7],10,1126891415),c=this.md5ii(c,l,s,u,t[n+14],15,-1416354905),u=this.md5ii(u,c,l,s,t[n+5],21,-57434055),s=this.md5ii(s,u,c,l,t[n+12],6,1700485571),l=this.md5ii(l,s,u,c,t[n+3],10,-1894986606),c=this.md5ii(c,l,s,u,t[n+10],15,-1051523),u=this.md5ii(u,c,l,s,t[n+1],21,-2054922799),s=this.md5ii(s,u,c,l,t[n+8],6,1873313359),l=this.md5ii(l,s,u,c,t[n+15],10,-30611744),c=this.md5ii(c,l,s,u,t[n+6],15,-1560198380),u=this.md5ii(u,c,l,s,t[n+13],21,1309151649),s=this.md5ii(s,u,c,l,t[n+4],6,-145523070),l=this.md5ii(l,s,u,c,t[n+11],10,-1120210379),c=this.md5ii(c,l,s,u,t[n+2],15,718787259),u=this.md5ii(u,c,l,s,t[n+9],21,-343485551),s=this.safeAdd(s,i),u=this.safeAdd(u,o),c=this.safeAdd(c,r),l=this.safeAdd(l,a);return[s,u,c,l]},binl2rstr:function(t){var e,n="",i=32*t.length;for(e=0;e<i;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n},rstr2binl:function(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;var i=8*t.length;for(e=0;e<i;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n},rstrMD5:function(t){return this.binl2rstr(this.binlMD5(this.rstr2binl(t),8*t.length))},rstrHMACMD5:function(t,e){var n,i,o=this.rstr2binl(t),r=[],a=[];for(r[15]=a[15]=void 0,o.length>16&&(o=this.binlMD5(o,8*t.length)),n=0;n<16;n+=1)r[n]=909522486^o[n],a[n]=1549556828^o[n];return i=this.binlMD5(r.concat(this.rstr2binl(e)),512+8*e.length),this.binl2rstr(this.binlMD5(a.concat(i),640))},rstr2hex:function(t){var e,n,i="0123456789abcdef",o="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),o+=i.charAt(e>>>4&15)+i.charAt(15&e);return o},str2rstrUTF8:function(t){return unescape(encodeURIComponent(t))},rawMD5:function(t){return this.rstrMD5(this.str2rstrUTF8(t))},hexMD5:function(t){return this.rstr2hex(this.rawMD5(t))},rawHMACMD5:function(t,e){return this.rstrHMACMD5(this.str2rstrUTF8(t),str2rstrUTF8(e))},hexHMACMD5:function(t,e){return this.rstr2hex(this.rawHMACMD5(t,e))},md5:function(t,e,n){return e?n?this.rawHMACMD5(e,t):this.hexHMACMD5(e,t):n?this.rawMD5(t):this.hexMD5(t)},getSig:function(t,e,n,i){var o=null,r=[];return Object.keys(t).sort().forEach((function(e){r.push(e+"="+t[e])})),"search"==n&&(o="/ws/place/v1/search?"+r.join("&")+e),"suggest"==n&&(o="/ws/place/v1/suggestion?"+r.join("&")+e),"reverseGeocoder"==n&&(o="/ws/geocoder/v1/?"+r.join("&")+e),"geocoder"==n&&(o="/ws/geocoder/v1/?"+r.join("&")+e),"getCityList"==n&&(o="/ws/district/v1/list?"+r.join("&")+e),"getDistrictByCityId"==n&&(o="/ws/district/v1/getchildren?"+r.join("&")+e),"calculateDistance"==n&&(o="/ws/distance/v1/?"+r.join("&")+e),"direction"==n&&(o="/ws/direction/v1/"+i+"?"+r.join("&")+e),o=this.md5(o),o},location2query:function(t){if("string"==typeof t)return t;for(var e="",n=0;n<t.length;n++){var i=t[n];e&&(e+=";"),i.location&&(e=e+i.location.lat+","+i.location.lng),i.latitude&&i.longitude&&(e=e+i.latitude+","+i.longitude)}return e},rad:function(t){return t*Math.PI/180},getEndLocation:function(t){for(var e=t.split(";"),n=[],i=0;i<e.length;i++)n.push({lat:parseFloat(e[i].split(",")[0]),lng:parseFloat(e[i].split(",")[1])});return n},getDistance:function(t,e,n,i){var o=this.rad(t),r=this.rad(n),a=o-r,s=this.rad(e)-this.rad(i),u=2*Math.asin(Math.sqrt(Math.pow(Math.sin(a/2),2)+Math.cos(o)*Math.cos(r)*Math.pow(Math.sin(s/2),2)));return u*=m,u=Math.round(1e4*u)/1e4,parseFloat(u.toFixed(0))},getWXLocation:function(t,e,n){wx.getLocation({type:"gcj02",success:t,fail:e,complete:n})},getLocationParam:function(t){if("string"==typeof t){var e=t.split(",");t=2===e.length?{latitude:t.split(",")[0],longitude:t.split(",")[1]}:{}}return t},polyfillParam:function(t){t.success=t.success||function(){},t.fail=t.fail||function(){},t.complete=t.complete||function(){}},checkParamKeyEmpty:function(t,e){if(!t[e]){var n=this.buildErrorConfig(a.PARAM_ERR,a.PARAM_ERR_MSG+e+"参数格式有误");return t.fail(n),t.complete(n),!0}return!1},checkKeyword:function(t){return!this.checkParamKeyEmpty(t,"keyword")},checkLocation:function(t){var e=this.getLocationParam(t.location);if(!e||!e.latitude||!e.longitude){var n=this.buildErrorConfig(a.PARAM_ERR,a.PARAM_ERR_MSG+" location参数格式有误");return t.fail(n),t.complete(n),!1}return!0},buildErrorConfig:function(t,e){return{status:t,message:e}},handleData:function(t,e,n){if("search"==n){for(var i=e.data,o=[],r=0;r<i.length;r++)o.push({id:i[r].id||null,title:i[r].title||null,latitude:i[r].location&&i[r].location.lat||null,longitude:i[r].location&&i[r].location.lng||null,address:i[r].address||null,category:i[r].category||null,tel:i[r].tel||null,adcode:i[r].ad_info&&i[r].ad_info.adcode||null,city:i[r].ad_info&&i[r].ad_info.city||null,district:i[r].ad_info&&i[r].ad_info.district||null,province:i[r].ad_info&&i[r].ad_info.province||null});t.success(e,{searchResult:i,searchSimplify:o})}else if("suggest"==n){var a=e.data,s=[];for(r=0;r<a.length;r++)s.push({adcode:a[r].adcode||null,address:a[r].address||null,category:a[r].category||null,city:a[r].city||null,district:a[r].district||null,id:a[r].id||null,latitude:a[r].location&&a[r].location.lat||null,longitude:a[r].location&&a[r].location.lng||null,province:a[r].province||null,title:a[r].title||null,type:a[r].type||null});t.success(e,{suggestResult:a,suggestSimplify:s})}else if("reverseGeocoder"==n){var u=e.result,c={address:u.address||null,latitude:u.location&&u.location.lat||null,longitude:u.location&&u.location.lng||null,adcode:u.ad_info&&u.ad_info.adcode||null,city:u.address_component&&u.address_component.city||null,district:u.address_component&&u.address_component.district||null,nation:u.address_component&&u.address_component.nation||null,province:u.address_component&&u.address_component.province||null,street:u.address_component&&u.address_component.street||null,street_number:u.address_component&&u.address_component.street_number||null,recommend:u.formatted_addresses&&u.formatted_addresses.recommend||null,rough:u.formatted_addresses&&u.formatted_addresses.rough||null};if(u.pois){var l=u.pois,d=[];for(r=0;r<l.length;r++)d.push({id:l[r].id||null,title:l[r].title||null,latitude:l[r].location&&l[r].location.lat||null,longitude:l[r].location&&l[r].location.lng||null,address:l[r].address||null,category:l[r].category||null,adcode:l[r].ad_info&&l[r].ad_info.adcode||null,city:l[r].ad_info&&l[r].ad_info.city||null,district:l[r].ad_info&&l[r].ad_info.district||null,province:l[r].ad_info&&l[r].ad_info.province||null});t.success(e,{reverseGeocoderResult:u,reverseGeocoderSimplify:c,pois:l,poisSimplify:d})}else t.success(e,{reverseGeocoderResult:u,reverseGeocoderSimplify:c})}else if("geocoder"==n){var f=e.result,g={title:f.title||null,latitude:f.location&&f.location.lat||null,longitude:f.location&&f.location.lng||null,adcode:f.ad_info&&f.ad_info.adcode||null,province:f.address_components&&f.address_components.province||null,city:f.address_components&&f.address_components.city||null,district:f.address_components&&f.address_components.district||null,street:f.address_components&&f.address_components.street||null,street_number:f.address_components&&f.address_components.street_number||null,level:f.level||null};t.success(e,{geocoderResult:f,geocoderSimplify:g})}else if("getCityList"==n){var h=e.result[0],p=e.result[1],m=e.result[2];t.success(e,{provinceResult:h,cityResult:p,districtResult:m})}else if("getDistrictByCityId"==n){var v=e.result[0];t.success(e,v)}else if("calculateDistance"==n){var y=e.result.elements,w=[];for(r=0;r<y.length;r++)w.push(y[r].distance);t.success(e,{calculateDistanceResult:y,distance:w})}else if("direction"==n){var _=e.result.routes;t.success(e,_)}else t.success(e)},buildWxRequestConfig:function(t,e,n){var i=this;return e.header={"content-type":"application/json"},e.method="GET",e.success=function(e){var o=e.data;0===o.status?i.handleData(t,o,n):t.fail(o)},e.fail=function(e){e.statusCode=a.WX_ERR_CODE,t.fail(i.buildErrorConfig(a.WX_ERR_CODE,e.errMsg))},e.complete=function(e){var n=+e.statusCode;switch(n){case a.WX_ERR_CODE:t.complete(i.buildErrorConfig(a.WX_ERR_CODE,e.errMsg));break;case a.WX_OK_CODE:var o=e.data;0===o.status?t.complete(o):t.complete(i.buildErrorConfig(o.status,o.message));break;default:t.complete(i.buildErrorConfig(a.SYSTEM_ERR,a.SYSTEM_ERR_MSG))}},e},locationProcess:function(t,e,n,i){var o=this;if(n=n||function(e){e.statusCode=a.WX_ERR_CODE,t.fail(o.buildErrorConfig(a.WX_ERR_CODE,e.errMsg))},i=i||function(e){e.statusCode==a.WX_ERR_CODE&&t.complete(o.buildErrorConfig(a.WX_ERR_CODE,e.errMsg))},t.location){if(o.checkLocation(t)){var r=v.getLocationParam(t.location);e(r)}}else o.getWXLocation(e,n,i)}},y=function(){function t(e){if((0,o.default)(this,t),!e.key)throw Error("key值不能为空");this.key=e.key}return(0,r.default)(t,[{key:"search",value:function(t){var e=this;if(t=t||{},v.polyfillParam(t),v.checkKeyword(t)){var n={keyword:t.keyword,orderby:t.orderby||"_distance",page_size:t.page_size||10,page_index:t.page_index||1,output:"json",key:e.key};t.address_format&&(n.address_format=t.address_format),t.filter&&(n.filter=t.filter);var i=t.distance||"1000",o=t.auto_extend||1,r=null,a=null;t.region&&(r=t.region),t.rectangle&&(a=t.rectangle);var s=function(e){r&&!a?(n.boundary="region("+r+","+o+","+e.latitude+","+e.longitude+")",t.sig&&(n.sig=v.getSig(n,t.sig,"search"))):a&&!r?(n.boundary="rectangle("+a+")",t.sig&&(n.sig=v.getSig(n,t.sig,"search"))):(n.boundary="nearby("+e.latitude+","+e.longitude+","+i+","+o+")",t.sig&&(n.sig=v.getSig(n,t.sig,"search"))),wx.request(v.buildWxRequestConfig(t,{url:u,data:n},"search"))};v.locationProcess(t,s)}}},{key:"getSuggestion",value:function(t){var e=this;if(t=t||{},v.polyfillParam(t),v.checkKeyword(t)){var n={keyword:t.keyword,region:t.region||"全国",region_fix:t.region_fix||0,policy:t.policy||0,page_size:t.page_size||10,page_index:t.page_index||1,get_subpois:t.get_subpois||0,output:"json",key:e.key};if(t.address_format&&(n.address_format=t.address_format),t.filter&&(n.filter=t.filter),t.location){var i=function(e){n.location=e.latitude+","+e.longitude,t.sig&&(n.sig=v.getSig(n,t.sig,"suggest")),wx.request(v.buildWxRequestConfig(t,{url:c,data:n},"suggest"))};v.locationProcess(t,i)}else t.sig&&(n.sig=v.getSig(n,t.sig,"suggest")),wx.request(v.buildWxRequestConfig(t,{url:c,data:n},"suggest"))}}},{key:"reverseGeocoder",value:function(t){var e=this;t=t||{},v.polyfillParam(t);var n={coord_type:t.coord_type||5,get_poi:t.get_poi||0,output:"json",key:e.key};t.poi_options&&(n.poi_options=t.poi_options);var i=function(e){n.location=e.latitude+","+e.longitude,t.sig&&(n.sig=v.getSig(n,t.sig,"reverseGeocoder")),wx.request(v.buildWxRequestConfig(t,{url:l,data:n},"reverseGeocoder"))};v.locationProcess(t,i)}},{key:"geocoder",value:function(t){var e=this;if(t=t||{},v.polyfillParam(t),!v.checkParamKeyEmpty(t,"address")){var n={address:t.address,output:"json",key:e.key};t.region&&(n.region=t.region),t.sig&&(n.sig=v.getSig(n,t.sig,"geocoder")),wx.request(v.buildWxRequestConfig(t,{url:l,data:n},"geocoder"))}}},{key:"getCityList",value:function(t){var e=this;t=t||{},v.polyfillParam(t);var n={output:"json",key:e.key};t.sig&&(n.sig=v.getSig(n,t.sig,"getCityList")),wx.request(v.buildWxRequestConfig(t,{url:d,data:n},"getCityList"))}},{key:"getDistrictByCityId",value:function(t){var e=this;if(t=t||{},v.polyfillParam(t),!v.checkParamKeyEmpty(t,"id")){var n={id:t.id||"",output:"json",key:e.key};t.sig&&(n.sig=v.getSig(n,t.sig,"getDistrictByCityId")),wx.request(v.buildWxRequestConfig(t,{url:f,data:n},"getDistrictByCityId"))}}},{key:"calculateDistance",value:function(t){var e=this;if(t=t||{},v.polyfillParam(t),!v.checkParamKeyEmpty(t,"to")){var n={mode:t.mode||"walking",to:v.location2query(t.to),output:"json",key:e.key};if(t.from&&(t.location=t.from),"straight"==n.mode){var i=function(e){for(var i=v.getEndLocation(n.to),o={message:"query ok",result:{elements:[]},status:0},r=0;r<i.length;r++)o.result.elements.push({distance:v.getDistance(e.latitude,e.longitude,i[r].lat,i[r].lng),duration:0,from:{lat:e.latitude,lng:e.longitude},to:{lat:i[r].lat,lng:i[r].lng}});var a=o.result.elements,s=[];for(r=0;r<a.length;r++)s.push(a[r].distance);return t.success(o,{calculateResult:a,distanceResult:s})};v.locationProcess(t,i)}else{i=function(e){n.from=e.latitude+","+e.longitude,t.sig&&(n.sig=v.getSig(n,t.sig,"calculateDistance")),wx.request(v.buildWxRequestConfig(t,{url:g,data:n},"calculateDistance"))};v.locationProcess(t,i)}}}},{key:"direction",value:function(t){var e=this;if(t=t||{},v.polyfillParam(t),!v.checkParamKeyEmpty(t,"to")){var n={output:"json",key:e.key};"string"==typeof t.to?n.to=t.to:n.to=t.to.latitude+","+t.to.longitude;var i=null;t.mode=t.mode||p.driving,i=h+t.mode,t.from&&(t.location=t.from),t.mode==p.driving&&(t.from_poi&&(n.from_poi=t.from_poi),t.heading&&(n.heading=t.heading),t.speed&&(n.speed=t.speed),t.accuracy&&(n.accuracy=t.accuracy),t.road_type&&(n.road_type=t.road_type),t.to_poi&&(n.to_poi=t.to_poi),t.from_track&&(n.from_track=t.from_track),t.waypoints&&(n.waypoints=t.waypoints),t.policy&&(n.policy=t.policy),t.plate_number&&(n.plate_number=t.plate_number)),t.mode==p.transit&&(t.departure_time&&(n.departure_time=t.departure_time),t.policy&&(n.policy=t.policy));var o=function(e){n.from=e.latitude+","+e.longitude,t.sig&&(n.sig=v.getSig(n,t.sig,"direction",t.mode)),wx.request(v.buildWxRequestConfig(t,{url:i,data:n},"direction"))};v.locationProcess(t,o)}}}]),t}();t.exports=y},"0bc5":function(t,e,n){"use strict";var i,o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"content",staticStyle:{position:"absolute",width:"100%",height:"100%"}},[n("v-uni-canvas",{staticClass:"canvas",style:{width:t.canvasWidth+"px",height:t.canvasHeight+"px"},attrs:{"canvas-id":"firstCanvas"}}),n("v-uni-view",{staticStyle:{position:"absolute",width:"100%",height:"100%","z-index":"1000"}},[n("v-uni-camera",{staticStyle:{width:"100%",height:"80%"},attrs:{"device-position":"back",flash:"off","frame-size":"large"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.error.apply(void 0,arguments)}}}),n("v-uni-view",{staticStyle:{width:"100%",height:"20%",display:"flex","justify-content":"center","align-items":"center",background:"#000000",position:"relative"}},[0==t.role?n("v-uni-view",{staticStyle:{width:"50px",height:"50px","border-radius":"50%",background:"#FFFFFF","text-align":"center","line-height":"50px"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.qrR.apply(void 0,arguments)}}},[n("v-uni-icon",{staticClass:"iconfont iconpaizhao iconclass"})],1):t._e(),1==t.role?n("v-uni-button",{staticStyle:{width:"50px",height:"50px","border-radius":"50%",background:"#FFFFFF","text-align":"center","line-height":"50px"},attrs:{disabled:t.disable},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.photo.apply(void 0,arguments)}}},[n("v-uni-icon",{staticClass:"iconfont iconpaizhao iconclass"})],1):t._e(),t.imgphoto?n("v-uni-image",{staticStyle:{position:"absolute",left:"20px",top:"35px",width:"50px",height:"50px","border-radius":"50%",display:"block"},attrs:{src:t.imgphoto},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t._previewImage(t.imgphoto)}}}):t._e()],1)],1)],1)},r=[];n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return i}))},2618:function(t,e,n){"use strict";var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var o=i(n("3b8d"));n("c5f6");var r,a=n("e2a7"),s=n("4cc3"),u=n("0ae1"),c=n("5d67"),l=n("02f9"),d={feikeError:"http://47.104.232.184/images/feike.mp3",success:"http://47.104.232.184/images/success.mp3"},f={name:"canvas-drawer",data:function(){return{canvasWidth:752,canvasHeight:808,cover:"https://s2.ax1x.com/2019/10/08/ufSasU.jpg",imgphoto:"",needLocation:[{id:1,name:"客厅",video:"http://47.104.232.184/images/keting.mp3"},{id:2,name:"餐厅",video:"http://47.104.232.184/images/canting.mp3"},{id:3,name:"厨房",video:"http://47.104.232.184/images/chufang.mp3"},{id:4,name:"卫生间",video:"http://47.104.232.184/images/weishengjian.mp3"},{id:5,name:"卧室",video:"http://47.104.232.184/images/woshi.mp3"},{id:6,name:"卧室",video:"http://47.104.232.184/images/woshi.mp3"}],currentVideoIndex:0,isLoading:!1,address:"",latitude:"",longitude:"",role:0,disable:!1,uuid:""}},onLoad:function(t){var e=this;r=this,uni.getSetting({success:function(n){if(!n.authSetting["scope.userLocation"]&&n.authSetting.hasOwnProperty("scope.userLocation"))fkConfirm({title:"温馨提示",content:"非客有家检测到您还没授权定位或拍照功能，是否去前去授权？",successFunction:function(){uni.openSetting({})},failFunction:function(){uni.showToast({title:"取消授权则无法使用该功能，即将退出拍照页面!",icon:"none",duration:2e3,success:function(){uni.navigateBack()}})}});else if("face"==t.role){var i=getCurrentPages(),o=(i[i.length-1],i[i.length-2]);o.setData({num:Number(t.index)}),console.log(Number(t.index)),uni.playBackgroundAudio({dataUrl:e.needLocation[Number(t.num)].video}),e.checkLocation(),r.role=0}else r.role=1,r.location=JSON.parse(decodeURIComponent(t.location)),console.log(t),r.latitude=t.latitude,r.longitude=t.longitude,r.latitude=22.71991,r.longitude=114.24779,r.uuid=t.uuid,e.checkPhotoLocation()}})},methods:{photo:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=uni.createCameraContext(),console.log(e),uni.showLoading({title:"照片上传中"}),t.next=5,e.takePhoto({quality:"high",success:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,uni.uploadFile({url:a.UPLOADPHOTO,filePath:e.tempImagePath,name:"file",success:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){var i,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),i=JSON.parse(e.data),uni.getSystemInfoSync(),l=uni.createCanvasContext("firstCanvas"),t.next=6,uni.getImageInfo({src:i.data,success:function(t){console.log(t.path),l.drawImage(t.path,0,0,375,uni.upx2px(1020));var e=l.createLinearGradient(0,0,800,0);e.addColorStop("0.25","#8b00d2"),e.addColorStop("0.5","#003fb3"),e.addColorStop("0.75","#ff3ef0"),l.font="13px Arial",l.fillStyle="#fff",l.fillText(n.address,uni.upx2px(20),uni.upx2px(1e3)),l.font="13px Arial",l.fillStyle="#fff",l.fillText((0,s.formatTime)(new Date),uni.upx2px(20),uni.upx2px(970)),l.draw(!1,(function(){uni.canvasToTempFilePath({x:0,y:0,width:375,height:uni.upx2px(1020),destWidth:375,destHeight:uni.upx2px(1020),canvasId:"firstCanvas",success:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),r.imgphoto=e.tempFilePath,t.next=4,uni.uploadFile({header:{"Content-Type":"multipart/form-data"},url:a.UPLOADPHOTO,filePath:e.tempFilePath,name:"file",success:function(t){console.log(t);var e={uuid:n.uuid,url:JSON.parse(t.data).data,potId:n.location[n.currentVideoIndex],latitude:n.latitude,longitude:n.longitude};(0,c.photoSubmit)(e).then((function(t){r.currentVideoIndex=n.currentVideoIndex+1,setTimeout((function(){uni.hideLoading(),uni.showToast({title:"成功",icon:"success",duration:2e3})}),100),n.currentVideoIndex<n.location.length?uni.playBackgroundAudio({dataUrl:n.needLocation[Number(n.location[n.currentVideoIndex])].video}):uni.playBackgroundAudio({dataUrl:d.success,success:function(){console.log("拍照完成，跳回前一页"),uni.switchTab({url:u.MINE})}})}))}});case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),fail:function(t){console.log(t),uni.showToast({title:"拍照失败",icon:"none"})}})}))},fail:function(t){setTimeout(uni.hideLoading,100),console.log(t)}});case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()});case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()});case 5:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),qrR:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=uni.createCameraContext(),console.log(e),uni.showLoading({title:"照片上传中"}),t.next=5,e.takePhoto({quality:"high",success:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,uni.uploadFile({url:a.UPLOADPHOTO,filePath:e.tempImagePath,name:"file",success:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){var i,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e),i=JSON.parse(e.data),uni.getSystemInfoSync(),a=uni.createCanvasContext("firstCanvas"),t.next=6,uni.getImageInfo({src:i.data,success:function(t){console.log(t.path),a.drawImage(t.path,0,0,375,uni.upx2px(1020));var e=a.createLinearGradient(0,0,800,0);e.addColorStop("0.25","#8b00d2"),e.addColorStop("0.5","#003fb3"),e.addColorStop("0.75","#ff3ef0"),a.font="13px Arial",a.fillStyle="#fff",a.fillText(n.address,uni.upx2px(20),uni.upx2px(1e3)),a.font="13px Arial",a.fillStyle="#fff",a.fillText((0,s.formatTime)(new Date),uni.upx2px(20),uni.upx2px(970)),a.draw(!1,(function(){uni.canvasToTempFilePath({x:0,y:0,width:375,height:uni.upx2px(1020),destWidth:375,destHeight:uni.upx2px(1020),canvasId:"firstCanvas",success:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e),r.imgphoto=e.tempFilePath,n=getCurrentPages(),n[n.length-1],i=n[n.length-2],i.setData({imgphoto:e.tempFilePath}),setTimeout((function(){uni.hideLoading(),uni.showToast({title:"成功",icon:"success",duration:2e3})}),100),uni.navigateBack();case 8:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),fail:function(t){console.log(t),uni.showToast({title:"拍照失败",icon:"none"})}})}))},fail:function(t){setTimeout(uni.hideLoading,100),console.log(t)}});case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()});case 3:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()});case 5:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),_previewImage:function(t){var e=[];e.push(t),uni.previewImage({urls:e,current:e[0]})},checkLocation:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new l({key:"RXMBZ-V3XKW-EPHR7-R7B2O-S75AK-3TFHW"}),t.next=3,uni.getLocation({type:"gcj02",altitude:"true",success:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.reverseGeocoder({location:{latitude:n.latitude,longitude:n.longitude},success:function(t){console.log(n),r.address=t.result.formatted_addresses.recommend,r.latitude=n.latitude,r.longitude=n.longitude;var e=getCurrentPages(),i=(e[e.length-1],e[e.length-2]);i.setData({latitude:n.latitude,longitude:n.longitude})}});case 1:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()});case 3:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),checkPhotoLocation:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e,n){var i,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new l({key:"RXMBZ-V3XKW-EPHR7-R7B2O-S75AK-3TFHW"}),t.next=3,uni.getLocation({type:"gcj02",altitude:"true",success:function(){var t=(0,o.default)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i.reverseGeocoder({location:{latitude:e.latitude,longitude:e.longitude},success:function(t){console.log(e),r.address=t.result.formatted_addresses.recommend,console.log(a);var n=(0,s.getDistance)({lat1:e.latitude,lng1:e.longitude,lat2:Number(a.latitude),lng2:Number(a.longitude)});n>10&&0==e.altitude?(uni.playBackgroundAudio({dataUrl:d.feikeError}),r.disable=!0):(uni.playBackgroundAudio({dataUrl:a.needLocation[Number(a.location[0])].video}),r.disable=!1)}});case 1:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()});case 3:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}()}};e.default=f},"3bf5":function(t,e,n){var i=n("9384");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=n("4f06").default;o("4b4ffe7c",i,!0,{sourceMap:!1,shadowMode:!1})},"4cc3":function(t,e,n){"use strict";n("20d6"),n("c5f6"),n("28a5"),n("a481"),n("6b54");var i=function(t){var e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),r=t.getHours(),a=t.getMinutes(),s=t.getSeconds();return[e,n,i].map(o).join("/")+" "+[r,a,s].map(o).join(":")},o=function(t){return t=t.toString(),t[1]?t:"0"+t},r=function(t){t=t.toString().length<13?1e3*t:t;var e=new Date(t),n=e.getFullYear()+"-",i=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",o=(e.getDate()<10?"0"+e.getDate():e.getDate())+" ",r=(e.getHours()<10?"0"+e.getHours():e.getHours())+":",a=(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":",s=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();return n+i+o+r+a+s},a=function(t,e){if(""===t.trim()){var n=e?e+"不可为空":"不可为空";return uni.showToast({title:n,icon:"none",mask:!0,duration:2e3}),!1}return!0},s=function(t,e){if(t=t.toString(),""===t.trim()){var n=e?e+"不可为空":"手机号不可为空";return uni.showToast({title:n,icon:"none",mask:!0,duration:2e3}),!1}var i=/^((13[0-9])|(14[5,7])|(15[0-3,5-9])|(17[0,3,5-8])|(18[0-9])|166|198|199|(147))\d{8}$/gi,o=i.test(t);if(!o){var r=e?"请输入正确"+e:"请输入正确手机号";return uni.showToast({title:r,icon:"none",mask:!0,duration:2e3}),!1}return!0},u=function(t,e){if(t=t.toString(),""===t.trim()){var n=e?e+"不可为空":"身份证不可为空";return uni.showToast({title:n,icon:"none",mask:!0,duration:2e3}),!1}if(18!=t.length){var i=e?"请输入正确"+e:"请输入正确身份证号";return uni.showToast({title:i,icon:"none",mask:!0,duration:2e3}),!1}return!0},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.ox,n=void 0===e?0:e,i=t.oy,o=void 0===i?0:i,r=t.ax,a=void 0===r?0:r,s=t.ay,u=void 0===s?0:s,c=t.angle,l=void 0===c?0:c,d={c:0,d:0};return d.c=parseInt(n+(a-n)*Math.cos(l)+(u-o)*Math.sin(l)),d.d=parseInt(o+(a-n)*-Math.sin(l)+(u-o)*Math.cos(l)),d},l=function(t){return null==t?0:("string"!=typeof t&&(t+=""),t.replace(/[^a-z]\d*/g,"01").length)};function d(t,e){var n,i,o;try{n=t.toString().split(".")[1].length}catch(r){n=0}try{i=e.toString().split(".")[1].length}catch(r){i=0}return o=Math.pow(10,Math.max(n,i)),((t*o+e*o)/o).toFixed(2)}function f(t,e){var n,i,o;try{n=t.toString().split(".")[1].length}catch(r){n=0}try{i=e.toString().split(".")[1].length}catch(r){i=0}return o=Math.pow(10,Math.max(n,i)),n>=i?n:i,((t*o-e*o)/o).toFixed(2)}function g(t,e){var n=0,i=t.toString(),o=e.toString();try{n+=i.split(".")[1].length}catch(r){}try{n+=o.split(".")[1].length}catch(r){}return Number(i.replace(".",""))*Number(o.replace(".",""))/Math.pow(10,n)}function h(t,e){if("function"!==typeof t)return console.warn("func 参数必须是Function类型"),function(){};if("number"!==typeof e)return console.warn("delay 参数必须是Number类型"),function(){};var n=Date.now();return function(){Date.now()-n>=e&&(t.call(this,arguments),n=Date.now())}}function p(t,e){if("function"!==typeof t)return console.warn("func 参数必须是Function类型"),function(){};if("number"!==typeof e)return console.warn("wait 参数必须是Number类型"),function(){};var n=null;return function(){null!==n&&clearTimeout(n),n=setTimeout(t,e)}}function m(t){var e=getCurrentPages(),n=e.findIndex((function(e){return e.route==t.substring(1)}));-1!=n?uni.navigateBack({delta:e.length-n-1}):uni.navigateTo({url:t,fail:function(){uni.switchTab({url:t})}})}var v=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.lat1,n=void 0===e?0:e,i=t.lng1,o=void 0===i?0:i,r=t.lat2,a=void 0===r?0:r,s=t.lng2,u=void 0===s?0:s,c=n*Math.PI/180,l=a*Math.PI/180,d=c-l,f=o*Math.PI/180-u*Math.PI/180,g=6378137,h=2*g*Math.asin(Math.sqrt(Math.pow(Math.sin(d/2),2)+Math.cos(c)*Math.cos(l)*Math.pow(Math.sin(f/2),2)));return parseInt(h)};t.exports={formatTime:i,time:r,checkRequestStr:a,checkPhone:s,checkIdCardLength:u,anglePoint:c,getBLen:l,accAdd:d,subtr:f,accMul:g,waterTap:h,debounce:p,toRoute:m,getDistance:v}},"5d67":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.myWorkFace=r,e.myWorkPhoto=a,e.myWorkPhotoLocation=s,e.photoSubmit=u;var i=n("133c"),o=n("e2a7");function r(t){return(0,i.request)({method:"GET",url:o.MYWORK_FACE,showSuccessToast:!0,data:t})}function a(t){return(0,i.request)({method:"GET",url:o.MYWORKPHOTO,showSuccessToast:!0,data:t})}function s(t){return(0,i.request)({method:"GET",url:o.MYWORKPHOTO_LOCATION,showSuccessToast:!0,data:t})}function u(t){return(0,i.request)({method:"POST",url:o.PHOTO_SUMBIT,showSuccessToast:!0,data:t})}},8014:function(t,e,n){"use strict";n.r(e);var i=n("0bc5"),o=n("cc95");for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);n("fbe6");var a,s=n("f0c5"),u=Object(s["a"])(o["default"],i["b"],i["c"],!1,null,"f8eac80a",null,!1,i["a"],a);e["default"]=u.exports},9384:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"/* Color\r\n--------------------------*/\n/* distance\r\n--------------------------*/\n/* radius\r\n--------------------------*/.post[data-v-f8eac80a]{height:100%;background-color:#f4f4f4}.post .wrapper[data-v-f8eac80a]{height:%?1020?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-top:%?50?%}.iconclass[data-v-f8eac80a]{font-size:14px}.canvas[data-v-f8eac80a]{position:fixed;top:100%;left:0;width:100%;height:100%;visibility:hidden}",""]),t.exports=e},cc95:function(t,e,n){"use strict";n.r(e);var i=n("2618"),o=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);e["default"]=o.a},fbe6:function(t,e,n){"use strict";var i=n("3bf5"),o=n.n(i);o.a}}]);